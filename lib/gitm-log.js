#!/usr/bin/env node
"use strict";require("core-js/modules/es.symbol");require("core-js/modules/es.symbol.description");require("core-js/modules/es.function.name");require("core-js/modules/es.object.to-string");require("core-js/modules/es.promise");require("regenerator-runtime/runtime");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var program=require("commander");var sh=require("shelljs");var _require=require("./js/index"),queue=_require.queue,success=_require.success,getLogs=_require.getLogs;var config=require("./js/config");var global=require("./js/global");var _require2=require("./js/global"),gitDir=_require2.gitDir;var ora=require("ora");program.name("gitm log").usage("[version]").description("日志查询").arguments("[version]").option("-s, --since [since]","查询在某个时间之后的日志，填写格式：10s/2m/2h/3d/4M/5y","7d").option("-l, --limit [limit]","做多查询的日志条数",20).option("-b, --branches [branches]","要查询的分支").action(function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(version,opt){var mainLogs;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:mainLogs=getLogs({since:opt.since,limit:opt.limit,branches:opt.branches});console.log(mainLogs);sh.exit(1);case 3:case"end":return _context.stop()}}},_callee)}));return function(_x,_x2){return _ref.apply(this,arguments)}}());program.parse(process.argv);