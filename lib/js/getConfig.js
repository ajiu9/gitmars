"use strict";var fs=require("fs");var gitRevParse=require("./gitRevParse");var _require=require("cosmiconfig"),cosmiconfigSync=_require.cosmiconfigSync;var _require2=require("./global"),defaults=_require2.defaults;var getConfig=function getConfig(pathName){var moduleName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"gitmars";var info;if(!pathName){var _gitRevParse=gitRevParse(),root=_gitRevParse.root;try{pathName=root+"/gitmarsconfig.json";info=fs.statSync(pathName)}catch(err){pathName=root}}var defaultSet={skipCI:true};var explorer=cosmiconfigSync(moduleName);if(!info)info=fs.statSync(pathName);if(info.isDirectory()){var _ref=explorer.search(pathName)||{},_ref$config=_ref.config,config=_ref$config===void 0?{}:_ref$config,_ref$filepath=_ref.filepath,filepath=_ref$filepath===void 0?"":_ref$filepath;return Object.assign({},defaults,defaultSet,config,{filepath:filepath})}else{var _ref2=explorer.load(pathName)||{},_ref2$config=_ref2.config,_config=_ref2$config===void 0?{}:_ref2$config,_ref2$filepath=_ref2.filepath,_filepath=_ref2$filepath===void 0?"":_ref2$filepath;return Object.assign({},defaults,defaultSet,_config,{filepath:_filepath})}};module.exports=getConfig;