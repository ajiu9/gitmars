"use strict";require("core-js/modules/es.promise.js");require("core-js/modules/es.object.to-string.js");require("regenerator-runtime/runtime.js");require("core-js/modules/es.string.split.js");require("core-js/modules/es.regexp.exec.js");require("core-js/modules/es.array.includes.js");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg);var value=info.value}catch(error){reject(error);return}if(info.done){resolve(value)}else{Promise.resolve(value).then(_next,_throw)}}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(undefined)})}}var sh=require("shelljs");var _require=require("./index"),getCurrent=_require.getCurrent;var getCommand=require("./go/getCommand");var cleanConfig=require("./go/cleanConfig");var combineConfig=require("../conf/combine");var endConfig=require("../conf/end");var updateConfig=require("../conf/update");var buildConfig=require("../conf/build");var startConfig=require("../conf/start");var _require2=require("../conf/admin"),adminCreateConfig=_require2.create,adminPublishConfig=_require2.publish,adminUpdateConfig=_require2.update,adminCleanConfig=_require2.clean;var current=getCurrent();var branchPrefix=current.split("/")[0];var functionBuanchs=["feature","bugfix","support"];exports.start=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var config,command;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:config=cleanConfig(startConfig);_context.next=3;return getCommand(config);case 3:_context.t0=_context.sent;command="gitm start "+_context.t0;sh.exec(command);case 6:case"end":return _context.stop()}}},_callee)}));exports.combine=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var delOptions,delArgs,requiredOptions,requiredArgs,config,command;return regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:delOptions=[],delArgs=[],requiredOptions=[],requiredArgs=[];if(functionBuanchs.includes(branchPrefix)){_context2.next=6;break}delOptions=["--as-feature","--no-bugfix"];requiredArgs=["type","name"];_context2.next=15;break;case 6:delArgs=["type","name"];_context2.t0=branchPrefix;_context2.next=_context2.t0==="feature"?10:_context2.t0==="support"?12:14;break;case 10:delOptions=["--as-feature"];return _context2.abrupt("break",15);case 12:delOptions=["--as-feature"];return _context2.abrupt("break",15);case 14:return _context2.abrupt("break",15);case 15:config=cleanConfig(combineConfig,{delOptions:delOptions,requiredOptions:requiredOptions,delArgs:delArgs,requiredArgs:requiredArgs});_context2.next=18;return getCommand(config);case 18:_context2.t1=_context2.sent;command="gitm combine "+_context2.t1;sh.exec(command);case 21:case"end":return _context2.stop()}}},_callee2)}));exports.end=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(){var delArgs,requiredArgs,config,command;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:delArgs=[],requiredArgs=[];if(!functionBuanchs.includes(branchPrefix)){requiredArgs=["type","name"]}else{delArgs=["type","name"]}config=cleanConfig(endConfig,{delArgs:delArgs,requiredArgs:requiredArgs});_context3.next=5;return getCommand(config);case 5:_context3.t0=_context3.sent;command="gitm end "+_context3.t0;sh.exec(command);case 8:case"end":return _context3.stop()}}},_callee3)}));exports.update=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(){var delArgs,requiredArgs,config,command;return regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:delArgs=[],requiredArgs=[];if(!functionBuanchs.includes(branchPrefix)){requiredArgs=["type","name"]}else{delArgs=["type","name"]}config=cleanConfig(updateConfig,{delArgs:delArgs,requiredArgs:requiredArgs});_context4.next=5;return getCommand(config);case 5:_context4.t0=_context4.sent;command="gitm update "+_context4.t0;sh.exec(command);case 8:case"end":return _context4.stop()}}},_callee4)}));exports.branch=_asyncToGenerator(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:console.log("即将支持，敬请期待！");sh.exec("gitm -v");case 2:case"end":return _context5.stop()}}},_callee5)}));exports.build=_asyncToGenerator(regeneratorRuntime.mark(function _callee6(){var config,command;return regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:config=cleanConfig(buildConfig);_context6.next=3;return getCommand(config);case 3:_context6.t0=_context6.sent;command="gitm build "+_context6.t0;sh.exec(command);case 6:case"end":return _context6.stop()}}},_callee6)}));exports.copy=_asyncToGenerator(regeneratorRuntime.mark(function _callee7(){return regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:console.log("即将支持，敬请期待！");sh.exec("gitm -v");case 2:case"end":return _context7.stop()}}},_callee7)}));exports.get=_asyncToGenerator(regeneratorRuntime.mark(function _callee8(){return regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:console.log("即将支持，敬请期待！");sh.exec("gitm -v");case 2:case"end":return _context8.stop()}}},_callee8)}));exports.save=_asyncToGenerator(regeneratorRuntime.mark(function _callee9(){return regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:console.log("即将支持，敬请期待！");sh.exec("gitm -v");case 2:case"end":return _context9.stop()}}},_callee9)}));exports.revert=_asyncToGenerator(regeneratorRuntime.mark(function _callee10(){return regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:console.log("即将支持，敬请期待！");sh.exec("gitm -v");case 2:case"end":return _context10.stop()}}},_callee10)}));exports.admin={create:function(){var _create=_asyncToGenerator(regeneratorRuntime.mark(function _callee11(){return regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:case"end":return _context11.stop()}}},_callee11)}));function create(){return _create.apply(this,arguments)}return create}(),publish:function(){var _publish=_asyncToGenerator(regeneratorRuntime.mark(function _callee12(){var config,command;return regeneratorRuntime.wrap(function _callee12$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:config=cleanConfig(adminPublishConfig);_context12.next=3;return getCommand(config);case 3:_context12.t0=_context12.sent;command="gitm admin publish "+_context12.t0;sh.exec(command);case 6:case"end":return _context12.stop()}}},_callee12)}));function publish(){return _publish.apply(this,arguments)}return publish}(),update:function(){var _update=_asyncToGenerator(regeneratorRuntime.mark(function _callee13(){return regeneratorRuntime.wrap(function _callee13$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:case"end":return _context13.stop()}}},_callee13)}));function update(){return _update.apply(this,arguments)}return update}(),clean:function(){var _clean=_asyncToGenerator(regeneratorRuntime.mark(function _callee14(){return regeneratorRuntime.wrap(function _callee14$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:case"end":return _context14.stop()}}},_callee14)}));function clean(){return _clean.apply(this,arguments)}return clean}()};