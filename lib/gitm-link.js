#!/usr/bin/env node
"use strict";require("core-js/modules/es.symbol.js");require("core-js/modules/es.symbol.description.js");require("core-js/modules/es.function.name.js");require("core-js/modules/web.dom-collections.for-each.js");require("core-js/modules/es.regexp.flags.js");require("core-js/modules/es.string.replace.js");require("core-js/modules/es.regexp.exec.js");var program=require("commander");var sh=require("shelljs");var _require=require("./conf/link"),options=_require.options,args=_require.args;var _require2=require("./js/index"),createArgs=_require2.createArgs;program.name("gitm link").usage("<name> <path>").description("链接本地包");if(args.length>0)program.arguments(createArgs(args));options.forEach(function(o){program.option(o.flags,o.description,o.defaultValue)});program.action(function(name,path,opt){path=path.replace(/\\/g,"/");var isLink=sh.test("-L","./node_modules/".concat(name));if(isLink){sh.rm("-rf","./node_modules/".concat(name))}else{sh.mv("./node_modules/".concat(name),"./node_modules/".concat(name,"_bak"))}sh.ln("-s",path,"./node_modules/".concat(name));sh.echo("处理完成")});program.parse(process.argv);